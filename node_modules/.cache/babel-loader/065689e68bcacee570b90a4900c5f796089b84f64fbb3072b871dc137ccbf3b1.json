{"ast":null,"code":"\"use strict\";\n\nvar _WeakMap = require(\"@babel/runtime-corejs3/core-js-stable/weak-map\");\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clearAllState = clearAllState;\nexports.commitServerChanges = commitServerChanges;\nexports.duplicateState = duplicateState;\nexports.enqueueTask = enqueueTask;\nexports.estimateAttribute = estimateAttribute;\nexports.estimateAttributes = estimateAttributes;\nexports.getObjectCache = getObjectCache;\nexports.getPendingOps = getPendingOps;\nexports.getServerData = getServerData;\nexports.getState = getState;\nexports.initializeState = initializeState;\nexports.mergeFirstPendingState = mergeFirstPendingState;\nexports.popPendingState = popPendingState;\nexports.pushPendingState = pushPendingState;\nexports.removeState = removeState;\nexports.setPendingOp = setPendingOp;\nexports.setServerData = setServerData;\nvar _create = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/create\"));\nvar ObjectStateMutations = _interopRequireWildcard(require(\"./ObjectStateMutations\"));\nfunction _interopRequireWildcard(e, t) {\n  if (\"function\" == typeof _WeakMap) var r = new _WeakMap(),\n    n = new _WeakMap();\n  return (_interopRequireWildcard = function (e, t) {\n    if (!t && e && e.__esModule) return e;\n    var o,\n      i,\n      f = {\n        __proto__: null,\n        default: e\n      };\n    if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f;\n    if (o = t ? n : r) {\n      if (o.has(e)) return o.get(e);\n      o.set(e, f);\n    }\n    for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = _Object$defineProperty) && _Object$getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]);\n    return f;\n  })(e, t);\n}\n// Use Object.create(null) to create an object without prototype chain\n// This prevents prototype pollution attacks\nlet objectState = (0, _create.default)(null);\nfunction getState(obj) {\n  const classData = objectState[obj.className];\n  if (classData) {\n    return classData[obj.id] || null;\n  }\n  return null;\n}\nfunction initializeState(obj, initial) {\n  let state = getState(obj);\n  if (state) {\n    return state;\n  }\n  if (!objectState[obj.className]) {\n    // Use Object.create(null) for nested objects too\n    objectState[obj.className] = (0, _create.default)(null);\n  }\n  if (!initial) {\n    initial = ObjectStateMutations.defaultState();\n  }\n  state = objectState[obj.className][obj.id] = initial;\n  return state;\n}\nfunction removeState(obj) {\n  const state = getState(obj);\n  if (state === null) {\n    return null;\n  }\n  delete objectState[obj.className][obj.id];\n  return state;\n}\nfunction getServerData(obj) {\n  const state = getState(obj);\n  if (state) {\n    return state.serverData;\n  }\n  return {};\n}\nfunction setServerData(obj, attributes) {\n  const serverData = initializeState(obj).serverData;\n  ObjectStateMutations.setServerData(serverData, attributes);\n}\nfunction getPendingOps(obj) {\n  const state = getState(obj);\n  if (state) {\n    return state.pendingOps;\n  }\n  return [{}];\n}\nfunction setPendingOp(obj, attr, op) {\n  const pendingOps = initializeState(obj).pendingOps;\n  ObjectStateMutations.setPendingOp(pendingOps, attr, op);\n}\nfunction pushPendingState(obj) {\n  const pendingOps = initializeState(obj).pendingOps;\n  ObjectStateMutations.pushPendingState(pendingOps);\n}\nfunction popPendingState(obj) {\n  const pendingOps = initializeState(obj).pendingOps;\n  return ObjectStateMutations.popPendingState(pendingOps);\n}\nfunction mergeFirstPendingState(obj) {\n  const pendingOps = getPendingOps(obj);\n  ObjectStateMutations.mergeFirstPendingState(pendingOps);\n}\nfunction getObjectCache(obj) {\n  const state = getState(obj);\n  if (state) {\n    return state.objectCache;\n  }\n  return {};\n}\nfunction estimateAttribute(obj, attr) {\n  const serverData = getServerData(obj);\n  const pendingOps = getPendingOps(obj);\n  return ObjectStateMutations.estimateAttribute(serverData, pendingOps, obj, attr);\n}\nfunction estimateAttributes(obj) {\n  const serverData = getServerData(obj);\n  const pendingOps = getPendingOps(obj);\n  return ObjectStateMutations.estimateAttributes(serverData, pendingOps, obj);\n}\nfunction commitServerChanges(obj, changes) {\n  const state = initializeState(obj);\n  ObjectStateMutations.commitServerChanges(state.serverData, state.objectCache, changes);\n}\nfunction enqueueTask(obj, task) {\n  const state = initializeState(obj);\n  return state.tasks.enqueue(task);\n}\nfunction clearAllState() {\n  objectState = (0, _create.default)(null);\n}\nfunction duplicateState(source, dest) {\n  dest.id = source.id;\n}","map":{"version":3,"names":["_WeakMap","require","_Object$defineProperty","_Object$getOwnPropertyDescriptor","_interopRequireDefault","exports","value","clearAllState","commitServerChanges","duplicateState","enqueueTask","estimateAttribute","estimateAttributes","getObjectCache","getPendingOps","getServerData","getState","initializeState","mergeFirstPendingState","popPendingState","pushPendingState","removeState","setPendingOp","setServerData","_create","ObjectStateMutations","_interopRequireWildcard","e","t","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","objectState","obj","classData","className","id","initial","state","defaultState","serverData","attributes","pendingOps","attr","op","objectCache","changes","task","tasks","enqueue","source","dest"],"sources":["/home/snx/Desktop/CS_School/node_modules/parse/lib/browser/SingleInstanceStateController.js"],"sourcesContent":["\"use strict\";\n\nvar _WeakMap = require(\"@babel/runtime-corejs3/core-js-stable/weak-map\");\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clearAllState = clearAllState;\nexports.commitServerChanges = commitServerChanges;\nexports.duplicateState = duplicateState;\nexports.enqueueTask = enqueueTask;\nexports.estimateAttribute = estimateAttribute;\nexports.estimateAttributes = estimateAttributes;\nexports.getObjectCache = getObjectCache;\nexports.getPendingOps = getPendingOps;\nexports.getServerData = getServerData;\nexports.getState = getState;\nexports.initializeState = initializeState;\nexports.mergeFirstPendingState = mergeFirstPendingState;\nexports.popPendingState = popPendingState;\nexports.pushPendingState = pushPendingState;\nexports.removeState = removeState;\nexports.setPendingOp = setPendingOp;\nexports.setServerData = setServerData;\nvar _create = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/create\"));\nvar ObjectStateMutations = _interopRequireWildcard(require(\"./ObjectStateMutations\"));\nfunction _interopRequireWildcard(e, t) {\n  if (\"function\" == typeof _WeakMap) var r = new _WeakMap(),\n    n = new _WeakMap();\n  return (_interopRequireWildcard = function (e, t) {\n    if (!t && e && e.__esModule) return e;\n    var o,\n      i,\n      f = {\n        __proto__: null,\n        default: e\n      };\n    if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f;\n    if (o = t ? n : r) {\n      if (o.has(e)) return o.get(e);\n      o.set(e, f);\n    }\n    for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = _Object$defineProperty) && _Object$getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]);\n    return f;\n  })(e, t);\n}\n// Use Object.create(null) to create an object without prototype chain\n// This prevents prototype pollution attacks\nlet objectState = (0, _create.default)(null);\nfunction getState(obj) {\n  const classData = objectState[obj.className];\n  if (classData) {\n    return classData[obj.id] || null;\n  }\n  return null;\n}\nfunction initializeState(obj, initial) {\n  let state = getState(obj);\n  if (state) {\n    return state;\n  }\n  if (!objectState[obj.className]) {\n    // Use Object.create(null) for nested objects too\n    objectState[obj.className] = (0, _create.default)(null);\n  }\n  if (!initial) {\n    initial = ObjectStateMutations.defaultState();\n  }\n  state = objectState[obj.className][obj.id] = initial;\n  return state;\n}\nfunction removeState(obj) {\n  const state = getState(obj);\n  if (state === null) {\n    return null;\n  }\n  delete objectState[obj.className][obj.id];\n  return state;\n}\nfunction getServerData(obj) {\n  const state = getState(obj);\n  if (state) {\n    return state.serverData;\n  }\n  return {};\n}\nfunction setServerData(obj, attributes) {\n  const serverData = initializeState(obj).serverData;\n  ObjectStateMutations.setServerData(serverData, attributes);\n}\nfunction getPendingOps(obj) {\n  const state = getState(obj);\n  if (state) {\n    return state.pendingOps;\n  }\n  return [{}];\n}\nfunction setPendingOp(obj, attr, op) {\n  const pendingOps = initializeState(obj).pendingOps;\n  ObjectStateMutations.setPendingOp(pendingOps, attr, op);\n}\nfunction pushPendingState(obj) {\n  const pendingOps = initializeState(obj).pendingOps;\n  ObjectStateMutations.pushPendingState(pendingOps);\n}\nfunction popPendingState(obj) {\n  const pendingOps = initializeState(obj).pendingOps;\n  return ObjectStateMutations.popPendingState(pendingOps);\n}\nfunction mergeFirstPendingState(obj) {\n  const pendingOps = getPendingOps(obj);\n  ObjectStateMutations.mergeFirstPendingState(pendingOps);\n}\nfunction getObjectCache(obj) {\n  const state = getState(obj);\n  if (state) {\n    return state.objectCache;\n  }\n  return {};\n}\nfunction estimateAttribute(obj, attr) {\n  const serverData = getServerData(obj);\n  const pendingOps = getPendingOps(obj);\n  return ObjectStateMutations.estimateAttribute(serverData, pendingOps, obj, attr);\n}\nfunction estimateAttributes(obj) {\n  const serverData = getServerData(obj);\n  const pendingOps = getPendingOps(obj);\n  return ObjectStateMutations.estimateAttributes(serverData, pendingOps, obj);\n}\nfunction commitServerChanges(obj, changes) {\n  const state = initializeState(obj);\n  ObjectStateMutations.commitServerChanges(state.serverData, state.objectCache, changes);\n}\nfunction enqueueTask(obj, task) {\n  const state = initializeState(obj);\n  return state.tasks.enqueue(task);\n}\nfunction clearAllState() {\n  objectState = (0, _create.default)(null);\n}\nfunction duplicateState(source, dest) {\n  dest.id = source.id;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}