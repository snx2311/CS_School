{"ast":null,"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\nvar _StorageController = _interopRequireDefault(require(\"./StorageController.react-native\"));\nconst LocalDatastoreController = {\n  async fromPinWithName(name) {\n    const values = await _StorageController.default.getItemAsync(name);\n    if (!values) {\n      return [];\n    }\n    const objects = JSON.parse(values);\n    return objects;\n  },\n  async pinWithName(name, value) {\n    try {\n      const values = (0, _stringify.default)(value);\n      await _StorageController.default.setItemAsync(name, values);\n    } catch (e) {\n      // Quota exceeded, possibly due to Safari Private Browsing mode\n      console.error(e.message);\n    }\n  },\n  unPinWithName(name) {\n    return _StorageController.default.removeItemAsync(name);\n  },\n  async getAllContents() {\n    const keys = await _StorageController.default.getAllKeysAsync();\n    const batch = [];\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n        batch.push(key);\n      }\n    }\n    const LDS = {};\n    let results = [];\n    try {\n      results = await _StorageController.default.multiGet(batch);\n    } catch (error) {\n      console.error('Error getAllContents: ', error);\n      return {};\n    }\n    (0, _forEach.default)(results).call(results, pair => {\n      const [key, value] = pair;\n      try {\n        LDS[key] = JSON.parse(value);\n      } catch (_) {\n        LDS[key] = null;\n      }\n    });\n    return LDS;\n  },\n  // Used for testing\n  async getRawStorage() {\n    var _context;\n    const keys = await _StorageController.default.getAllKeysAsync();\n    const storage = {};\n    const results = await _StorageController.default.multiGet(keys);\n    (0, _map.default)(_context = results).call(_context, pair => {\n      const [key, value] = pair;\n      storage[key] = value;\n    });\n    return storage;\n  },\n  async clear() {\n    const keys = await _StorageController.default.getAllKeysAsync();\n    const batch = [];\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n        batch.push(key);\n      }\n    }\n    await _StorageController.default.multiRemove(batch).catch(error => console.error('Error clearing local datastore: ', error));\n  }\n};\nvar _default = exports.default = LocalDatastoreController;","map":{"version":3,"names":["_Object$defineProperty","require","_interopRequireDefault","exports","value","default","_stringify","_forEach","_map","_LocalDatastoreUtils","_StorageController","LocalDatastoreController","fromPinWithName","name","values","getItemAsync","objects","JSON","parse","pinWithName","setItemAsync","e","console","error","message","unPinWithName","removeItemAsync","getAllContents","keys","getAllKeysAsync","batch","i","length","key","isLocalDatastoreKey","push","LDS","results","multiGet","call","pair","_","getRawStorage","_context","storage","clear","multiRemove","catch","_default"],"sources":["/home/snx/Desktop/CS_School/node_modules/parse/lib/browser/LocalDatastoreController.react-native.js"],"sourcesContent":["\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\nvar _StorageController = _interopRequireDefault(require(\"./StorageController.react-native\"));\nconst LocalDatastoreController = {\n  async fromPinWithName(name) {\n    const values = await _StorageController.default.getItemAsync(name);\n    if (!values) {\n      return [];\n    }\n    const objects = JSON.parse(values);\n    return objects;\n  },\n  async pinWithName(name, value) {\n    try {\n      const values = (0, _stringify.default)(value);\n      await _StorageController.default.setItemAsync(name, values);\n    } catch (e) {\n      // Quota exceeded, possibly due to Safari Private Browsing mode\n      console.error(e.message);\n    }\n  },\n  unPinWithName(name) {\n    return _StorageController.default.removeItemAsync(name);\n  },\n  async getAllContents() {\n    const keys = await _StorageController.default.getAllKeysAsync();\n    const batch = [];\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n        batch.push(key);\n      }\n    }\n    const LDS = {};\n    let results = [];\n    try {\n      results = await _StorageController.default.multiGet(batch);\n    } catch (error) {\n      console.error('Error getAllContents: ', error);\n      return {};\n    }\n    (0, _forEach.default)(results).call(results, pair => {\n      const [key, value] = pair;\n      try {\n        LDS[key] = JSON.parse(value);\n      } catch (_) {\n        LDS[key] = null;\n      }\n    });\n    return LDS;\n  },\n  // Used for testing\n  async getRawStorage() {\n    var _context;\n    const keys = await _StorageController.default.getAllKeysAsync();\n    const storage = {};\n    const results = await _StorageController.default.multiGet(keys);\n    (0, _map.default)(_context = results).call(_context, pair => {\n      const [key, value] = pair;\n      storage[key] = value;\n    });\n    return storage;\n  },\n  async clear() {\n    const keys = await _StorageController.default.getAllKeysAsync();\n    const batch = [];\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n        batch.push(key);\n      }\n    }\n    await _StorageController.default.multiRemove(batch).catch(error => console.error('Error clearing local datastore: ', error));\n  }\n};\nvar _default = exports.default = LocalDatastoreController;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}